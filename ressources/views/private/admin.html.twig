{# This page inherits from base.html #}
{% extends 'layout.html.twig' %}

{# Define Title #}
{% block title %} Administration {% endblock %}

{#  Breadcrumb trail #}
{% set active_page = 'Administration' %}


{# Define Content #}
{% block content %}


    <div class="row">

        <h1> Administration </h1>

        <div class="row">
            <div class="col-md-2">
                <img class="img img-responsive img-circle" src="{{ asset('assets/images/avatar/' ~ app.user.avatar_member) }}">
            </div>
            <div class="col-md-offset-1 col-md-9">
                <h2> Bonjour {{ app.user.pseudo_member }}</h2>
                <p> Membre actif depuis le: {{ app.user.date_member | date("d/m/Y") }} </p>
                <p> Email: {{ app.user.mail_member }} </p>
            </div>
        </div>

        <div class="col-md-offset-3 col-md-6">

            <!-- Stats -->
            <h2> Nombre de membres: {{ members }} </h2>
            <h2> Nombre de livres disponibles: {{ availableBooks }}</h2>
            <h2> Nombre total de livres créés sur la plateforme: {{ books }} </h2>

            <!-- Google Charts -->
            
            <!-- Form: Add a category -->
            <h2> Ajouter une catégorie </h2>

            {% if global.request.get('addCat') == 'success' %}
                <div class="alert alert-success">
                    <p>
                        <i class="fa fa-thumbs-up" aria-hidden="true"></i> 
                        Félicitation, la catégorie a été créée.
                    </p>
                </div>
            {% endif %}

            <form id="formAddCat" action="" method="POST">
                <!-- Category -->
                <div class="form-group">
                    <label for="name_category">Catégorie</label>
                    <div class="input-group">
                        {{ form_row(formAddCat.name_category) }}
                    </div>
                    <p class="error alert alert-danger">Vous n'avez pas indiqué la catégorie</p>
                </div>
                <!-- Token -->
                {{ form_row(formAddCat._token) }}
                <!-- Submission -->
                <div class="form-group text-center">
                    <input type="submit" name="btnSub" value="Ajouter" class="btn btn-success">
                </div>
            </form>

            {# <h2> Les catégories </h2> #}
            {# {{ dump(categories) }} #}


            <!-- Form: Look for an ID -->
            <h2> Rechercher l'identifiant d'un membre </h2>

            {% if global.request.get('idMember') == 'success' %}
                <div class="alert alert-success">
                    <p>
                        <i class="fa fa-thumbs-up" aria-hidden="true"></i> 
                        L'identifiant de  {{ global.request.get('pseudo') }} est: {{ global.request.get('id_member') }}
                    </p>
                </div>
            {% endif %}

            <form id="formMember" action="" method="POST">
                <!-- Pseudo -->
                <div class="form-group">
                    <label for="name_category">Pseudo</label>
                    <div class="input-group">
                        {{ form_row(formMember.pseudo_member) }}
                    </div>
                    <p class="error alert alert-danger">Vous n'avez pas indiqué le pseudo</p>
                </div>
                <!-- Token -->
                {{ form_row(formMember._token) }}
                <!-- Submission -->
                <div class="form-group text-center">
                    <input type="submit" name="btnSub" value="Rechercher" class="btn btn-success">
                </div>
            </form>

            <!-- Form: Look for an ID -->
            <h2> Définir le rôle d'un membre </h2>

            {% if global.request.get('changeRole') == 'success' %}
                <div class="alert alert-success">
                    <p>
                        <i class="fa fa-thumbs-up" aria-hidden="true"></i> 
                        Félicitation, le rôle a été modifié.
                    </p>
                </div>
            {% endif %}

            {# Change Role by ID #}
            <form id="formRole" action="" method="POST" class="col-md-6">
                <!-- Id du membre -->
                <div class="form-group">
                    <label for="id_member">Identifiant</label>
                    <div class="input-group">
                        {{ form_row(formRole.id_member) }}
                    </div>
                    <p class="error alert alert-danger">Vous n'avez pas indiqué l'identifiant</p>
                </div>
                <!-- Role du membre -->
                <div class="form-group">
                    <label for="role_member">Rôle</label>
                    <div class="input-group">
                        {{ form_row(formRole.role_member) }}
                    </div>
                    <p class="error alert alert-danger">Vous n'avez pas indiqué le role du membre</p>
                </div>
                <!-- Token -->
                {{ form_row(formRole._token) }}
                <!-- Submission -->
                <div class="form-group text-center">
                    <input type="submit" name="btnSub" value="Modifier" class="btn btn-success">
                </div>
            </form>

            
            {# Change Role by Pseudo #}
            <form id="formRole2" action="" method="POST" class="col-md-6">
                <!-- Id du membre -->
                <div class="form-group">
                    <label for="pseudo_member">Pseudo</label>
                    <div class="input-group">
                        {{ form_row(formRole2.pseudo_member) }}
                    </div>
                    <p class="error alert alert-danger">Vous n'avez pas indiqué le pseudo</p>
                </div>
                <!-- Role du membre -->
                <div class="form-group">
                    <label for="role_member">Rôle</label>
                    <div class="input-group">
                        {{ form_row(formRole2.role_member) }}
                    </div>
                    <p class="error alert alert-danger">Vous n'avez pas indiqué le role du membre</p>
                </div>
                <!-- Token -->
                {{ form_row(formRole2._token) }}
                <!-- Submission -->
                <div class="form-group text-center">
                    <input type="submit" name="btnSub" value="Modifier" class="btn btn-success">
                </div>
            </form>


        </div>
    </div>

{% endblock %}