{# This page inherits from base.html #}
{% extends 'layout.html.twig' %}

{# Customized error messages #}
{% form_theme form 'form_errors.html.twig' %}

{#  Define Title #}
{% block title %} Créer un nouveau mot de passe {% endblock %}

{#  Breadcrumb trail #}
{% set active_page = 'resetPassword2' %}

{# Define Content #}
{% block content %}


    <div class="row">

        <h1> Créer un nouveau mot de passe </h1>

        <div class="col-md-offset-3 col-md-6">
            <!-- Form: Reset Paasword -->
            <form id="formResetPassword2" action="" method="POST">

                <!-- Email -->
                <div class="form-group">
                    <label for="mail_member">Email *</label>
                    <div class="input-group">
                        <div class="input-group-addon">@</div>
                        {{ form_widget(form.mail_member) }}
                    </div>
                    {{ form_errors(form.mail_member) }}
                </div>
                <!-- Password -->
                <div class="form-group">
                    <label for="pass_member">Mot de passe *</label>
                    <!-- Help-text -->
                    <p id="pass-helptext">Votre mot de passe doit contenir au moins 6 caractères, une majuscule et un chiffre</p>
                    <!-- Password complexity -->
                    <p id="password_strength"></p>
                    <div class="input-group">
                        <div class="input-group-addon"><span class="ion-android-lock"></span></div>
                        {{ form_widget(form.pass_member.first) }}
                        {{ form_widget(form.pass_member.second) }}
                    </div>
                    <!-- Password Errors -->
                    {{ form_errors(form.pass_member.first) }}
                    {{ form_errors(form.pass_member.second) }}
                </div>

                {{ form_row(form._token) }}

                <div class="form-group text-center">
                    <input type="submit" name="btnSub" value="Entrer" id="btn_memberInscription" class="btn btn-success">
                </div>


            </form>

        </div> <!-- col-md -->

    </div> <!-- row -->


{% endblock %}


{% block javascripts %}
    {{ parent() }}


    <script>
        $(document).ready(function() {


            $("#form_pass_member_first").bind("keyup", function () {
                //TextBox left blank.
                if ($(this).val().length == 0) {
                    $("#password_strength").html("");
                    return;
                }
                //Regular Expressions.
                var regex = new Array();
                regex.push("[A-Z]"); //Uppercase Alphabet.
                regex.push("[a-z]"); //Lowercase Alphabet.
                regex.push("[0-9]"); //Digit.
                // regex.push("[$@$!%*#?&]"); //Special Character.
                var passed = 0;
                //Validate for each Regular Expression.
                for (var i = 0; i < regex.length; i++) {
                    if (new RegExp(regex[i]).test($(this).val())) {
                        passed++;
                    }
                }
                //Validate for length of Password.
                if (passed > 2 && $(this).val().length > 6) {
                    passed++;
                }
                //Display status.
                var color = "";
                var strength = "";
                switch (passed) {
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                        strength = "Weak";
                        color = "red";
                        break;
                    case 4:
                        strength = "Strong";
                        color = "green";
                        break;
                    case 5:
                        strength = "Very Strong";
                        color = "darkgreen";
                        break;
                }
                $("#password_strength").html(strength);
                $("#password_strength").css("color", color);
            });

            // Show/Hide Mdp Help-text
            $("#pass-helptext").hide();

            $("#form_pass_member_first").focus(function() {
                $("#pass-helptext").show();
            });
            $("#form_pass_member_first").blur(function() {
                $("#pass-helptext").hide();
            });


        }) // document ready
    </script>


{% endblock %}
